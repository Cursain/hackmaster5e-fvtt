{"_id":"Hdsxa72DflLPZqBt","name":"Defend","type":"script","author":"YT3vyFbQDsF30XLi","img":"icons/equipment/shield/heater-crystal-blue.webp","scope":"global","command":"if (this.isObsolete(2, \"getDefend\")) return false;\nconst actor = this._hm_getActor();\nif (!actor) return;\n\nconst dialog  = \"def\";\nconst formula = \"1d20p + @bonus.total.def + @resp.mod\";\nconst dataset = {dialog, formula};\nconst dialogResp = await this.dialogmgr.getDialog(dataset, actor);\nconst roll = await this.rollmgr.getRoll(dataset, dialogResp);\nconst card = await this.chatmgr.getCard(roll, dataset, dialogResp);\nawait ChatMessage.create(card);","folder":null,"sort":0,"permission":{"default":0,"YT3vyFbQDsF30XLi":3},"flags":{"core":{"sourceId":"Macro.vxKYUkbgzS0OS31I"}}}
{"_id":"KREd0ZIDAqSE0ynN","name":"Damage","type":"script","author":"YT3vyFbQDsF30XLi","img":"icons/skills/melee/strike-sword-%20blood-red.webp","scope":"global","command":"if (this.isObsolete(2, \"getDamage\")) return false;\nconst actor = this._hm_getActor();\nif (!actor) return;\n\nconst dialog  = \"dmg\";\nconst formula = \"@resp.dmg + @bonus.total.dmg + @resp.mod\";\nconst dataset = {dialog, formula};\nconst dialogResp = await this.dialogmgr.getDialog(dataset, actor);\nconst roll = await this.rollmgr.getRoll(dataset, dialogResp);\nconst card = await this.chatmgr.getCard(roll, dataset, dialogResp);\nawait ChatMessage.create(card);","folder":null,"sort":0,"permission":{"default":0,"YT3vyFbQDsF30XLi":3},"flags":{"core":{"sourceId":"Macro.whD23kXLYQeR6bbv"}}}
{"_id":"KXUHFJbE6KondQN0","name":"Attack","type":"script","author":"YT3vyFbQDsF30XLi","img":"icons/weapons/swords/greatsword-blue.webp","scope":"global","command":"if (this.isObsolete(2, \"getAttack\")) return false;\nconst actor = this._hm_getActor();\nif (!actor) return;\n\nconst dialog  = \"atk\";\nconst formula = \"1d20p + @bonus.total.atk + @resp.mod\";\nconst dataset = {dialog, formula};\nconst dialogResp = await this.dialogmgr.getDialog(dataset, actor);\nconst roll = await this.rollmgr.getRoll(dataset, dialogResp);\nconst card = await this.chatmgr.getCard(roll, dataset, dialogResp);\nawait ChatMessage.create(card);","folder":null,"sort":0,"permission":{"default":0,"YT3vyFbQDsF30XLi":3},"flags":{"core":{"sourceId":"Macro.1wYLnuQjAlZ5Io0E"}}}
{"_id":"f7881wppYrI2Lc0n","name":"Inflict Wound","type":"script","author":"9BV8kpaEbvqHiGtI","img":"icons/skills/melee/blood-slash-foam-red.webp","scope":"global","command":"if (this.isObsolete(2, \"setWound\")) return false;\nconst actor = this._hm_getActor({allActors: true});\nif (!actor) return;\n\nconst dialog = \"wound\";\nconst dataset = {dialog};\nconst dialogResp = await this.dialogmgr.getDialog(dataset);\nconst itemData = dialogResp.data;\n\nif (itemData.hp < 1) return;\nconst data = {name: \"New Wound\", type: \"wound\", data: itemData};\nfor (let i=0; i < actor.length; i++) {\n    try {\n        await Item.create(data, {parent: actor[i]});\n    } catch (error) {\n        ui.notifications.warn(\"Unable to wound \" + actor[i].name + \".\");\n        console.error(error);\n        continue;\n    }\n    ui.notifications.info(\"<b>\" + actor[i].name + \"</b> receives <b>\" \n                                + itemData.hp   + \" HP</b> of damage.\");\n}","folder":null,"sort":0,"permission":{"default":0,"tCEmHegsCUF698n9":3,"YT3vyFbQDsF30XLi":3,"9BV8kpaEbvqHiGtI":3},"flags":{"core":{"sourceId":"Macro.XTeusTAXqqPY9MmB"}}}
