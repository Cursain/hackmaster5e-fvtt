{"name":"Inflict Wound","type":"script","author":"tCEmHegsCUF698n9","img":"icons/skills/melee/blood-slash-foam-red.webp","scope":"global","command":"const tokenList = canvas.tokens.controlled;\nif (!tokenList.length) return;\n\nconst dmg = await new Promise(async resolve => {\n    new Dialog({\n        title: game.i18n.localize(\"HM.dialog.setWoundTitle\"),\n        content: await renderTemplate(\"systems/hackmaster5e/templates/dialog/setWound.hbs\"),\n        buttons: {\n            wound: {\n                label: game.i18n.localize(\"HM.dialog.setWoundTitle\"),\n                callback: () => { resolve(parseInt(document.getElementById(\"hp\").value)) }\n            }\n        },\n        default: \"wound\"\n    }).render(true);\n    setTimeout(() => {document.getElementById(\"hp\").focus()}, 10);\n});\n\nif (dmg < 1) return;\nconst woundData = {hp: {value: dmg}, duration: {value: dmg}};\nconst data = {name: \"New Wound\", type: \"wound\", data: woundData};\n\nfor (let i=0; i < tokenList.length; i++) {\n    let actor = tokenList[i].actor;\n    await Item.create(data, {parent: actor});\n}","folder":null,"sort":0,"permission":{"default":0,"tCEmHegsCUF698n9":3},"flags":{"core":{"sourceId":"Macro.XTeusTAXqqPY9MmB"}},"_id":"p0ikj1oBuw6MuzSO"}
